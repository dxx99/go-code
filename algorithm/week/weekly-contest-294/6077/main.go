package main

import (
	"fmt"
	"math"
)

var (
	bigarr = []int{1689,1159,323,348,374,303,782,1816,1455,196,749,1835,70,851,873,1546,1670,132,1438,1576,1864,1532,1816,1672,564,1427,1404,263,724,585,706,309,1869,938,1678,545,1528,1103,748,470,289,207,1197,1208,1120,678,1159,1232,1449,1208,1002,254,1627,1712,1191,1427,1958,1154,1987,1964,1264,1399,1612,52,1513,241,1117,973,1320,1306,302,692,1091,806,1435,99,1770,447,166,1933,1377,1135,25,1559,106,775,615,1455,1479,1247,266,490,1670,1525,462,1951,1070,694,658,390,517,1452,322,714,557,1965,1247,915,1385,298,1101,1409,1382,779,396,1933,1693,685,384,704,101,362,1381,964,1948,1771,1038,1253,730,621,508,1574,377,1218,494,696,695,1780,547,1083,1310,1999,535,1844,75,1184,248,1267,325,1909,772,893,693,556,1949,676,1016,1786,930,1157,1134,1535,170,786,882,1572,1810,1420,1378,142,408,1689,27,1073,1531,960,1529,5,113,302,1840,1960,1585,457,1874,1841,12,1681,1889,1732,1954,172,1787,1216,453,233,245,1676,276,1962,1989,360,1803,1605,308,1654,1850,1359,211,1474,776,1456,1951,643,1065,493,1706,1918,1437,779,1058,453}
)

func main() {
	fmt.Println(totalStrength([]int{747,812,112,1230,1426,1477,1388,976,849,1431,1885,1845,1070,1980,280,1075,232,1330,1868,1696,1361,1822,524,1899,1904,538,731,985,279,1608,1558,930,1232,1497,875,1850,1173,805,1720,33,233,330,1429,1688,281,362,1963,927,1688,256,1594,1823,743,553,1633,1898,1101,1278,717,522,1926,1451,119,1283,1016,194,780,1436,1233,710,1608,523,874,1779,1822,134,1984}))
	fmt.Println(totalStrength([]int{1,3,1,2}))
	fmt.Println(totalStrength([]int{5,4,6}))
	fmt.Println(totalStrength(bigarr))
}

func totalStrength(strength []int) int {
	ans := 0

	size := 1
	for size <= len(strength) {
		for i := 0; i+size <= len(strength); i++ {
			ans += cal(strength[i:i+size])
		}
		size++
	}

	return ans % (int(math.Pow10(9))+7)
}

func cal(arr []int) int {
	if len(arr) == 0 {
		return 0
	}

	min, sum := arr[0], arr[0]
	for i := 1; i < len(arr); i++ {
		if min > arr[i] {
			min = arr[i]
		}
		sum += arr[i]
	}
	return min * sum
}